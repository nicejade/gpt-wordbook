import"./disclose-version.DsnmJJEf.js";import{i as ie}from"./lifecycle.DLRtFJmz.js";import{k as ce,l as F,a as u,p as le,b as de,f as _,s as f,c as s,r as i,g as T,m as I,n as N,t as R,d as X,o as Y,i as C}from"./render.mTkhE2lq.js";import{i as m}from"./if.BWnMkYcl.js";import{s as q}from"./class.B6AyfGV-.js";import{p as w}from"./props.BdYYPdt3.js";var pe=_('<span class="absolute inset-0 rounded-full bg-[#8b5cf6]/20 animate-ping"></span>'),ue=_('<button aria-label="播放英式发音" title="播放英式发音"><span class="text-xs font-bold opacity-50 uppercase">UK</span> <span class="font-sans text-base !mt-[-2px] tracking-wide opacity-90"> </span> <div class="relative w-[1.1rem] h-[1.1rem] flex items-center justify-center"><!> <svg class="w-full h-full opacity-60 group-hover:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg></div></button>'),fe=_(`<div class="w-[1px] h-6 bg-black/[0.08] [:root[data-theme='dark']_&amp;]:bg-white/0.1 !mx-6 !my-0"></div>`),he=_('<span class="absolute inset-0 rounded-full bg-[#8b5cf6]/20 animate-ping"></span>'),ve=_('<button aria-label="播放美式发音" title="播放美式发音"><span class="text-xs font-bold opacity-50 uppercase">US</span> <span class="font-sans text-base !mt-[-2px] tracking-wide opacity-90"> </span> <div class="relative w-[1.1rem] h-[1.1rem] flex items-center justify-center"><!> <svg class="w-full h-full opacity-60 group-hover:opacity-100 transition-opacity" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg></div></button>'),me=_(`<h3 class="font-bold uppercase my-[0]! text-[#1d1d1f]/60 [:root[data-theme='dark']_&amp;]:text-[#f5f5f7]/60 px-1">音标发音</h3> <div class="mx-auto !my-8 max-w-fit [perspective:1000px] print:hidden"><div class="flex items-center p-[0.4rem] bg-white/60 [:root[data-theme='dark']_&amp;]:bg-[#1c1c1e]/60 backdrop-blur-[20px] backdrop-saturate-[180%] border border-black/[0.08] [:root[data-theme='dark']_&amp;]:border-white/0.08 rounded-[1.5rem] shadow-[0_10px_30px_-5px_rgba(0,0,0,0.05),0_4px_10px_-2px_rgba(0,0,0,0.02),inset_0_1px_1px_rgba(255,255,255,0.8)] [:root[data-theme='dark']_&amp;]:shadow-[0_15px_35px_-5px_rgba(0,0,0,0.3),0_5px_15px_-2px_rgba(0,0,0,0.1),inset_0_1px_0_rgba(255,255,255,0.05)] transition-all duration-500"><!> <!> <!></div></div>`,1);function ye(z,h){de(h,!1);let k=w(h,"word",8),y=w(h,"uk",8,""),S=w(h,"us",8,""),D=w(h,"audioWord",8,""),O=w(h,"speechText",8,""),U=I(!1),A=I(!1),b=0;const H=2;let c=null,V=!1;const J=()=>(D()||k()).trim().toLowerCase(),Q=()=>{const t=(O()||k()).trim();return!O()&&k().trim().length===1?k().trim().toLowerCase():t},Z=()=>{const t=J();return`https://api.dictionaryapi.dev/media/pronunciations/en/${encodeURIComponent(t)}-us.mp3`},$=t=>new Promise(e=>setTimeout(e,t)),K=(t,e)=>{t==="uk"?(C(U,e),C(A,!1)):(C(A,e),C(U,!1))},ee=()=>{b+=1,"speechSynthesis"in window&&window.speechSynthesis.cancel(),c&&(c.pause(),c.currentTime=0,c=null)},L=t=>new Promise(e=>{if(!("speechSynthesis"in window)){e();return}const a=new SpeechSynthesisUtterance(Q()),n=window.speechSynthesis.getVoices().find(l=>t==="uk"?l.lang.startsWith("en-GB"):l.lang.startsWith("en-US"));n&&(a.voice=n),a.lang=t==="uk"?"en-GB":"en-US",a.rate=.8,a.onend=()=>e(),a.onerror=()=>e(),window.speechSynthesis.speak(a)}),te=()=>new Promise(t=>{if(V){L("us").then(()=>t());return}const e=new Audio(Z());e.preload="none",c=e;let a=!1;const v=()=>{a||(a=!0,t())},n=()=>{c===e&&(c=null),e.removeEventListener("ended",x),e.removeEventListener("error",P)},l=()=>{V=!0,n(),L("us").then(()=>v())},x=()=>{n(),v()},P=()=>l();e.addEventListener("ended",x,{once:!0}),e.addEventListener("error",P,{once:!0}),e.play().catch(()=>l())}),ae=t=>t==="uk"?L("uk"):te(),M=async t=>{ee();const e=b;K(t,!0);for(let a=0;a<H&&!(e!==b||(await ae(t),e!==b));a+=1)a<2&&await $(300);e===b&&K(t,!1)};"speechSynthesis"in window&&(window.speechSynthesis.getVoices(),window.speechSynthesis.onvoiceschanged=()=>{window.speechSynthesis.getVoices()}),ie();var G=ce(),re=F(G);{var oe=t=>{var e=me(),a=f(F(e),2),v=s(a),n=s(v);{var l=o=>{var r=ue(),d=f(s(r),2),W=s(d,!0);i(d);var g=f(d,2),j=s(g);{var E=p=>{var B=pe();u(p,B)};m(j,p=>{T(U)&&p(E)})}N(2),i(g),i(r),R(()=>{q(r,1,`group flex flex-row items-center justify-center gap-3 py-[0.6rem] px-[1.2rem] bg-transparent border-none rounded-[1.2rem] cursor-pointer text-[#1d1d1f] [:root[data-theme='dark']_&]:text-[#f5f5f7] transition-all duration-300 hover:bg-black/[0.03] [:root[data-theme='dark']_&]:hover:bg-white/[0.05] active:scale-[0.96] active:bg-black/[0.06] ${T(U)?"text-[#8b5cf6]":""}`),X(W,y())}),Y("click",r,()=>M("uk")),u(o,r)};m(n,o=>{y()&&o(l)})}var x=f(n,2);{var P=o=>{var r=fe();u(o,r)};m(x,o=>{y()&&S()&&o(P)})}var ne=f(x,2);{var se=o=>{var r=ve(),d=f(s(r),2),W=s(d,!0);i(d);var g=f(d,2),j=s(g);{var E=p=>{var B=he();u(p,B)};m(j,p=>{T(A)&&p(E)})}N(2),i(g),i(r),R(()=>{q(r,1,`!my-0 group flex flex-row items-center justify-center gap-3 py-[0.6rem] px-[1.2rem] bg-transparent border-none rounded-[1.2rem] cursor-pointer text-[#1d1d1f] [:root[data-theme='dark']_&]:text-[#f5f5f7] transition-all duration-300 hover:bg-black/[0.03] [:root[data-theme='dark']_&]:hover:bg-white/[0.05] active:scale-[0.96] active:bg-black/[0.06] ${T(A)?"text-[#8b5cf6]":""}`),X(W,S())}),Y("click",r,()=>M("us")),u(o,r)};m(ne,o=>{S()&&o(se)})}i(v),i(a),u(t,e)};m(re,t=>{(y()||S())&&t(oe)})}u(z,G),le()}export{ye as default};
