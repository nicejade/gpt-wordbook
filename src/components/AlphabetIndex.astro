---
/**
 * AlphabetIndex.astro
 * A professional, responsive alphabet navigation component with Steve Jobs' aesthetic.
 * Features:
 * - Minimalist design with subtle shadows and rounded corners
 * - Responsive grid layout (13 columns on desktop, 9 on tablet, 7 on mobile, 6 on small mobile)
 * - Automatic active state detection based on current path
 * - High-quality hover effects
 * - Fully implemented with TailwindCSS
 */

const alphabet = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ'.split('');
const currentPath = Astro.url.pathname;

// Helper to check if a letter is the current active one
const isActive = (letter: string) => {
  const path = `/words-index/${letter.toLowerCase()}/`;
  // Normalize both paths to ensure comparison works regardless of trailing slashes
  const normalizedCurrentPath = currentPath.endsWith('/') ? currentPath : `${currentPath}/`;
  return normalizedCurrentPath === path || normalizedCurrentPath === `${path}index.html/`;
};
---

<div class="not-prose mx-auto! my-8! p-5 max-w-[900px] bg-white/[0.02] border border-white/[0.08] rounded-[1.25rem] backdrop-blur-[12px] shadow-[0_4px_6px_-1px_rgba(0,0,0,0.1),0_2px_4px_-1px_rgba(0,0,0,0.06),inset_0_1px_1px_rgba(255,255,255,0.05)] [:where(html[data-theme='light'])_&]:bg-black/[0.01] [:where(html[data-theme='light'])_&]:border-black/[0.04] [:where(html[data-theme='light'])_&]:shadow-[0_10px_15px_-3px_rgba(0,0,0,0.05),0_4px_6px_-2px_rgba(0,0,0,0.02),inset_0_1px_0_rgba(255,255,255,0.5)] md:mx-2 md:mt-12 md:mb-6 md:p-4 md:rounded-2xl">
  <nav 
    class="grid grid-cols-13 gap-2 lg:grid-cols-13 md:grid-cols-7 sm:grid-cols-6 sm:gap-[0.35rem]" 
    aria-label="Alphabetical index"
  >
    {alphabet.map((letter) => (
      <a
        href={`/words-index/${letter.toLowerCase()}/`}
        class:list={[
          'flex items-center justify-center aspect-square text-[0.95rem] font-medium font-sans text-[var(--sl-color-gray-3)] no-underline rounded-[0.6rem] transition-all duration-[250ms] ease-[cubic-bezier(0.4,0,0.2,1)] border border-transparent relative overflow-hidden',
          'hover:bg-[var(--sl-color-gray-9)] hover:text-[var(--sl-color-accent-high)] hover:-translate-y-px hover:border-[rgba(var(--sl-color-accent-base),0.1)]',
          '[:where(html[data-theme=\'light\'])_&]:hover:bg-white [:where(html[data-theme=\'light\'])_&]:hover:shadow-[0_2px_8px_rgba(0,0,0,0.05)]',
          'sm:text-[0.85rem] sm:rounded-lg',
          {
            'bg-[var(--sl-color-accent-low)] text-[var(--sl-color-accent-high)] border-[rgba(var(--sl-color-accent-base),0.3)] font-bold shadow-[0_0_0_1px_rgba(var(--sl-color-accent-base),0.2),0_2px_4px_rgba(0,0,0,0.1)] [:where(html[data-theme=\'light\'])_&]:bg-[var(--sl-color-accent-low)] [:where(html[data-theme=\'light\'])_&]:shadow-[0_2px_8px_rgba(var(--sl-color-accent-base),0.15),inset_0_0_0_1px_rgba(var(--sl-color-accent-base),0.1)]': isActive(letter)
          }
        ]}
        aria-current={isActive(letter) ? 'page' : undefined}
      >
        {letter}
      </a>
    ))}
  </nav>
</div>